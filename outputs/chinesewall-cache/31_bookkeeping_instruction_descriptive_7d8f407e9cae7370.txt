[3853, 3862]
class Yarn:
    """Represents the yarns that a yarn store sells"""
    
    def __init__(self, purchase_price: int, sell_price: int, color: str):
        self.purchase_price = purchase_price
        self.sell_price = sell_price
        self.color = color

class BankAccount:
    """Represents the bank account of this yarn store"""

    def __init__(self, balance: int):
        self.balance = balance

    def reduce_balance(self, quantity: int):
        """Reduces balance of this account if possible"""
        if quantity > self.balance:
            raise ValueError
        else:
            self.balance -= quantity
    
    def add_balance(self, quantity: int):
        """Adds to this account's balacne"""
        self.balance += quantity

    
    def get_balance(self):
        """Returns the balance of this account"""
        return self.balance

class WareHouse:
    """Represents a warehouse that stores the yarn stock of this yarn store."""
    
    def __init__(self):
        self.stock = {}

    def stock_of(self, item: Yarn):
        """Gets the stock of the yarn given"""
        if item not in self.stock:
            raise ValueError
        else:
            return self.stock[item]
        
    def add_stock(self, items: dict[Yarn, int]):
        """Adds stock to this warehouse"""
        for item, quant in items.items():
            if item in self.stock:
                self.stock[item] += quant
            else:
                self.stock[item] = quant
    
    def reduce_stock(self, items: dict[Yarn, int]):
        """Reduces the stock of this warehouse"""
        for item, quant in items.items():
            if item in self.stock and self.stock[item] >= quant:
                self.stock[item] -= quant
            else:
                raise ValueError

class Store:
    
    def __init__(self, starting_balance: int):
        self.bank = BankAccount(starting_balance)
        self.warehouse = WareHouse()

    # EDIT: Remove the `price: int` parameter from this method's definition.
    def buy_yarn(self, order: dict[Yarn, int], price: int):
        """Buy the quantity of yarn specified by the order"""
        # EDIT: Before adding stock, you need to calculate the total cost of the order.
        # 1. Create a variable called `total_purchase_price` and set it to 0.
        # 2. Loop through each `yarn` and `quantity` pair in the `order` dictionary. You can do this with `for yarn, quantity in order.items():`.
        # 3. Inside the loop, get the purchase price of the current `yarn` (it's stored in `yarn.purchase_price`).
        # 4. Multiply the `yarn.purchase_price` by the `quantity` for that yarn.
        # 5. Add the result to your `total_purchase_price` variable.
        self.warehouse.add_stock(order)
        # EDIT: Change `price` in the line below to the `total_purchase_price` you calculated above.
        self.bank.reduce_balance(price)
    
    # EDIT: Remove the `price: int` parameter from this method's definition.
    def sell_yarn(self, order: dict[Yarn, int], price: int):
        """Sell the quantity of yarn specified by the order"""
        # EDIT: Before reducing stock, you need to calculate the total revenue from the sale.
        # 1. Create a variable called `total_sell_price` and set it to 0.
        # 2. Loop through each `yarn` and `quantity` pair in the `order` dictionary. You can do this with `for yarn, quantity in order.items():`.
        # 3. Inside the loop, get the selling price of the current `yarn` (it's stored in `yarn.sell_price`).
        # 4. Multiply the `yarn.sell_price` by the `quantity` for that yarn.
        # 5. Add the result to your `total_sell_price` variable.
        self.warehouse.reduce_stock(order)
        # EDIT: Change `price` in the line below to the `total_sell_price` you calculated above.
        self.bank.add_balance(price)

===============
```py
class Yarn:
    """Represents the yarns that a yarn store sells"""
    
    def __init__(self, purchase_price: int, sell_price: int, color: str):
        self.purchase_price = purchase_price
        self.sell_price = sell_price
        self.color = color

class BankAccount:
    """Represents the bank account of this yarn store"""

    def __init__(self, balance: int):
        self.balance = balance

    def reduce_balance(self, quantity: int):
        """Reduces balance of this account if possible"""
        if quantity > self.balance:
            raise ValueError
        else:
            self.balance -= quantity
    
    def add_balance(self, quantity: int):
        """Adds to this account's balacne"""
        self.balance += quantity

    
    def get_balance(self):
        """Returns the balance of this account"""
        return self.balance

class WareHouse:
    """Represents a warehouse that stores the yarn stock of this yarn store."""
    
    def __init__(self):
        self.stock = {}

    def stock_of(self, item: Yarn):
        """Gets the stock of the yarn given"""
        if item not in self.stock:
            raise ValueError
        else:
            return self.stock[item]
        
    def add_stock(self, items: dict[Yarn, int]):
        """Adds stock to this warehouse"""
        for item, quant in items.items():
            if item in self.stock:
                self.stock[item] += quant
            else:
                self.stock[item] = quant
    
    def reduce_stock(self, items: dict[Yarn, int]):
        """Reduces the stock of this warehouse"""
        for item, quant in items.items():
            if item in self.stock and self.stock[item] >= quant:
                self.stock[item] -= quant
            else:
                raise ValueError

class Store:
    
    def __init__(self, starting_balance: int):
        self.bank = BankAccount(starting_balance)
        self.warehouse = WareHouse()

    # EDIT: Remove the `price: int` parameter from this method's definition.
    def buy_yarn(self, order: dict[Yarn, int], price: int):
        """Buy the quantity of yarn specified by the order"""
        # EDIT: Before adding stock, you need to calculate the total cost of the order.
        # 1. Create a variable called `total_purchase_price` and set it to 0.
        # 2. Loop through each `yarn` and `quantity` pair in the `order` dictionary. You can do this with `for yarn, quantity in order.items():`.
        # 3. Inside the loop, get the purchase price of the current `yarn` (it's stored in `yarn.purchase_price`).
        # 4. Multiply the `yarn.purchase_price` by the `quantity` for that yarn.
        # 5. Add the result to your `total_purchase_price` variable.
        self.warehouse.add_stock(order)
        # EDIT: Change `price` in the line below to the `total_purchase_price` you calculated above.
        self.bank.reduce_balance(price)
    
    # EDIT: Remove the `price: int` parameter from this method's definition.
    def sell_yarn(self, order: dict[Yarn, int], price: int):
        """Sell the quantity of yarn specified by the order"""
        # EDIT: Before reducing stock, you need to calculate the total revenue from the sale.
        # 1. Create a variable called `total_sell_price` and set it to 0.
        # 2. Loop through each `yarn` and `quantity` pair in the `order` dictionary. You can do this with `for yarn, quantity in order.items():`.
        # 3. Inside the loop, get the selling price of the current `yarn` (it's stored in `yarn.sell_price`).
        # 4. Multiply the `yarn.sell_price` by the `quantity` for that yarn.
        # 5. Add the result to your `total_sell_price` variable.
        self.warehouse.reduce_stock(order)
        # EDIT: Change `price` in the line below to the `total_sell_price` you calculated above.
        self.bank.add_balance(price)
```
